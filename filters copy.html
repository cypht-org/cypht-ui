<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FIlters Page</title>
    <!-- Bootstrap CSS -->

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css"
        integrity="sha512-jnSuA4Ss2PkkikSOLtYs8BlYIeeIK1h99ty4YfvRPAlzr377vr3CXDb7sb7eEEBYjDtcYj+AjBH3FLv5uSJuXg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Icon 1 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/coswise/hicon-css@latest/web-fonts/hicon.min.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css"
        integrity="sha512-dPXYcDub/aeb08c63jRq/k6GaKccl256JQy/AnOq7CAnEZ9FzSL9wSbcZkMp4R26vBsMLFYH4kQ67/bbV8XaCQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/assets/css/filters.css">
</head>

<body class="position-relative">
    <div class="base__container d-flex flex-column-reverse flex-lg-row">

        <div class="menu__container magic-t-line">

            <!-- Mobile -->
            <ul class="p-0 m-0 d-flex align-items-center justify-content-around d-lg-none" id="sidebar-menu">
                <li> <a href="/home.html" class="menu-link">
                        <i class="bi bi-grid"></i>
                    </a></li>
                <li> <a href="/folder.html" class="menu-link">
                        <i class="bi bi-folder"></i>
                    </a></li>
                <li> <a href="/contacts.html" class="menu-link">
                        <i class="bi bi-people"></i>
                    </a></li>
                <li> <a href="/info.html" class="menu-link">
                        <i class="bi bi-exclamation-diamond"></i>
                    </a></li>
                <li id="setting-btn" class="d-md-none"> <a class="menu-link sidebar_active" href="#">
                        <i class="bi bi-gear-fill"></i>
                    </a></li>


                <li class="d-none d-md-flex"> <a class="menu-link" href="/site.html">
                        <i class="bi bi-diagram-2"></i>
                    </a></li>

                <li class="d-none d-md-flex" style="padding-top: 5px;"> <a href="/server.html" class="sidebar_active">
                        <i class='bx bxs-card'></i>
                    </a></li>
            </ul>

            <div id="setting-menu"
                class="position-absolute setting__container  align-items-end justify-content-end  me-3 d-lg-none">
                <ul class="d-flex align-items-center justify-content-start column-gap-3 mb-2  py-0 px-3">
                    <li class=""> <a href="/site.html" class="menu-link">
                            <i class="bi bi-diagram-2" style="font-size: 1.2rem;"></i>
                            </i>Site
                        </a></li>
                    <li class=""> <a href="/server.html" class="menu-link">
                            <i class='bx bxs-card'></i>Server
                        </a></li>
                </ul>
            </div>
            <!-- </nav> -->

            <nav class="d-none d-lg-flex flex-column justify-content-between  magic-r-line py-2">
                <div class="d-flex flex-column align-items-center  gap-4  justify-content-center">
                    <div class="d-flexalign-items-center logo_content">
                        <img class="object-fit-cover" src="/assets/images/svg/logo.svg" />
                    </div>

                    <div class="menu_group">
                        <ul class="">
                            <li><a href="/home.html">
                                    <i class="bi bi-grid-fill"></i>
                                </a></li>
                            <li><a href="/folder.html">
                                    <i class="bi bi-folder"></i>
                                </a></li>
                            <li><a href="/contacts.html">
                                    <i class="bi bi-people"></i>
                                </a></li>
                            <li><a href="/info.html">
                                    <i class='bi bi-exclamation-diamond'></i>
                                </a></li>
                        </ul>
                    </div>

                </div>

                <div class="button_group align-items-center gap-3 d-flex flex-column justify-content-end ">
                    <a href="/site.html"><i class="bi bi-diagram-2"></i></a>
                    <a href="/server.html" class="sidebar_active"><i class="bi bi-hdd-network-fill"></i></a>
                    <div>
                        <div class="rounded_circle">
                            <img src="/assets/images/avatar.jpg" alt="" class="rounded-circle avatar">
                        </div>
                    </div>
                </div>
            </nav>
        </div>

        <div class="flex-1 position-relative d-flex flex-column" style="background-color: var(--background-2);">
            <!-- Mobile -->
            <div class="d-flex flex-column  d-lg-none">
                <div class="d-flex align-items-center justify-content-between column-gap-2 top__menu px-3 px-md-4 ">
                    <div class="pt-2 mobile_menu_title d-flex align-items-center ">
                        <button data-bs-toggle="offcanvas" data-bs-target="#off-home-menu"
                            aria-controls="offcanvasExample"
                            class="d-flex align-items-center justify-content-center p-1">
                            <i class='bx bx-menu' style="font-size: 1.5rem;"></i>
                        </button>
                        <span class="ms-2">Server
                            Settings</span>

                    </div>
                    <div>
                        <div class="rounded_circle">
                            <img src="/assets/images/avatar.jpg" alt="" class="rounded-circle avatar">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Desktop -->
            <div class="d-flex d-lg-flex flex-1 magic-t-line">

                <div class="d-none d-lg-block parameter__menu__card">
                    <div class="title__card mb-2">
                        <h3 class="fw-semibold">Settings</h3>
                    </div>

                    <div class="item__card d-flex flex-column">
                        <span class="item__card__label">Menu</span>
                        <ul class="">
                            <li><a href="/server.html">Servers Settings</a></li>
                            <li><a href="/filters.html" class="parameter__active__menu">Filters</a></li>
                            <li><a href="/block_list.html">Block List</a></li>
                            <li><a href="/feed.html">Feeds</a></li>
                            <li><a href="/dev.html">Dev</a></li>
                            <li><a href="/shortcuts.html">Shortcuts</a></li>
                            <li><a href="/profile.html">Profile</a></li>
                        </ul>
                    </div>

                </div>

                <div class="flex-1 position-relative">
                    <div class="h-100 d-flex flex-column  px-md-2  pt-lg-3 ps-lg-3 overflow-y-auto desktop_scroll top-0 button-0  end-0 gap-4"
                        style=" background-color: var(--background)">

                        <div class="py-2 param_label_container px-3">
                            <div class="param_title fw-bold d-flex align-items-center">

                                <div class="param_icon_card d-inline-flex d-none d-lg-block">
                                    <i class="bi bi-sliders2-vertical"></i>
                                </div>

                                <span>Filters</span>
                            </div>
                            <small class="param_description">Lorem ipsum
                                dolor sit
                                amet
                                consectetur
                                adipisicing elit.
                                Dolorum officiis doloribus
                            </small>

                            <div>
                            </div>
                        </div>

                        <!--  -->
                        <div class="flex-grow-1 position-relative">
                            <div
                                class="position-absolute mb-4 fw-medium d-flex flex-column row-gap-4 pb-4 shortcuts_param_list  end-0 start-0 bottom-0 top-0 px-3">

                                <div class="col-xl-11 col-xxl-9 d-flex flex-column">
                                    <div class="d-flex justify-content-between mb-1 label__card">
                                        <small class="d-flex align-items-center column-gap-2 title"><i
                                                class='bx bx-card' style="font-size: 1rem;"></i>Server List</small>

                                        <small class="mt-1 description">
                                            Server list Lorem ipsum dolor sit amet consectetur adipisicing elit.
                                        </small>
                                    </div>

                                    <div class=" mt-2 p-0 d-flex gap-1 gap-md-2 gap-lg-3 flex-wrap">
                                        <div class="d-flex  gap-3">
                                            <div class="option-card" onclick="selectOption(this)">
                                                <div style="padding-top: 3.8px;">
                                                    <div class="radio-circle"></div>
                                                </div>
                                                <span>
                                                    server@example.gik
                                                </span>
                                            </div>
                                        </div>
                                        <div class="d-flex  gap-3">
                                            <div class="option-card" onclick="selectOption(this)">
                                                <div style="padding-top: 3.8px;">
                                                    <div class="radio-circle"></div>
                                                </div>
                                                <span>
                                                    server@example.gik
                                                </span>
                                            </div>
                                        </div>
                                        <div class="d-flex  gap-3">
                                            <div class="option-card" onclick="selectOption(this)">
                                                <div style="padding-top: 3.8px;">
                                                    <div class="radio-circle"></div>
                                                </div>
                                                <span>
                                                    server@example.gik
                                                </span>
                                            </div>
                                        </div>
                                        <div class="d-flex  gap-3">
                                            <div class="option-card" onclick="selectOption(this)">
                                                <div style="padding-top: 3.8px;">
                                                    <div class="radio-circle"></div>
                                                </div>
                                                <span>
                                                    server@example.gik
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-xl-11 col-xxl-9 d-flex flex-column pb-0 pt-1 row-gap-2 mt-3 flex-1">
                                    <div
                                        class="d-flex flex-column gap-3 flex-md-row align-items-md-center justify-content-md-between">
                                        <div class="clear_space d-flex flex-column description__text"
                                            style="font-size: .88rem;">
                                            <small>Quickly add an account from popular E-mail providers</small>
                                            <small class="mt-1">
                                                To manually configure an account,
                                                use the <a href="" class="label_action fw-medium">IMAP/SMTP</a> section.
                                            </small>
                                        </div>

                                        <div class="d-flex column-gap-3 col-9 col-md-4 col-lg-5 col-xl-4"
                                            style="margin-right: .7rem;">

                                            <button id="config_btn" type="button" data-bs-toggle="offcanvas"
                                                data-bs-target="#filter-modal" aria-controls="offcanvasRight"
                                                class="simple_btn px-2 px-lg-1 column-gap-1"><i
                                                    class='bx bxs-filter-alt'></i>Add
                                                Filter</button>
                                            <button id="config_btn" type="button" data-bs-toggle="offcanvas"
                                                data-bs-target="#script-modal" aria-controls="offcanvasRight"
                                                class="simple_btn px-2 px-lg-1  column-gap-1"><i
                                                    class='bx bx-code-block'></i>Add Script</button>


                                        </div>
                                    </div>

                                    <div class="flex-1  position-relative mt-3">
                                        <div class="position-absolute scrollable top-0 start-0 bottom-0 end-0">

                                            <div class="table__card p-0 m-0">
                                                <div class="d-flex table__card__title px-2 fw-semibold">
                                                    <span class="flex-1"><i class='bx bx-sort'></i>Priority</span>
                                                    <span class="table_left_line_card d-flex justify-content-start px-2"
                                                        style="width: 55%;"><i class='bx bx-camera-home'></i>Name</span>

                                                    <span class="table_left_line_card" style="width: 25%;"><i
                                                            class='bx bx-dots-vertical-rounded'></i>Actions</span>
                                                </div>

                                                <!-- Table Items -->
                                                <div>
                                                    <div class="d-flex justify-content-between px-2 table__card__item"
                                                        style="height: 1.8rem;">
                                                        <span id="feed_name" class="fw-semibold px-3 flex-1"
                                                            style="font-size: .8rem;">
                                                            1
                                                        </span>
                                                        <span
                                                            class="table_left_line_card d-flex justify-content-start px-2"
                                                            style="width: 55%;">
                                                            Filter Demo text
                                                        </span>
                                                        <div id="feed__actions" class="table_left_line_card"
                                                            style="width: 25%;">
                                                            <div class="form-check form-switch">
                                                                <input class="form-check-input cursor-pointer"
                                                                    type="checkbox" value="" id="filter_status" checked>
                                                            </div>


                                                            <button class="update_btn clear__btn"
                                                                data-bs-toggle="tooltip" data-bs-placement="top"
                                                                title="Test"><i class='bx bx-candles'> </i></button>

                                                            <button class="delete_btn clear__btn"
                                                                data-bs-toggle="tooltip" data-bs-placement="top"
                                                                title="Delete"><i class='bx bx-trash'></i></button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <!-- 1. Menu -->
    <div class="offcanvas offcanvas-start my-1 ms-1 rounded d-flex flex-column d-lg-none" tabindex="-1"
        id="off-home-menu" aria-labelledby="offcanvasExampleLabel" style="width: 330px; ">

        <div class="offcanvas-body">
            <div class="mt-2" style="width: 90px;">
                <img src="/assets/images/svg/logo_dark.svg" class="" alt="Logo">
            </div>
            <div class="d-flex flex-column menu_modal mb-2 mt-5 scrollable "
                style="max-height: calc(97dvh - 120px); overflow-y: auto;">

                <div class="group_menu">
                    <ul class="p-0">
                        <li><a href="/server.html">Servers Settings</a></li>
                        <li><a href="/filters.html" class="active__menu">Filters</a></li>
                        <li><a href="/block_list.html">Block List</a></li>
                        <li><a href="/feed.html">Feeds</a></li>
                        <li><a href="/dev.html">Dev</a></li>
                        <li><a href="/shortcuts.html">Shortcuts</a></li>
                        <li><a href="/shortcuts.html">Profile</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- 2. -->
    <!-- Filter -->
    <div class="offcanvas offcanvas-end my-2 mx-2 rounded scrollable overflow-y-auto" tabindex="-1" id="filter-modal"
        aria-labelledby="offcanvasRightLabel">
        <div class="offcanvas-header">
            <div class="w-100">
                <div class="d-flex justify-content-between align-items-center">
                    <h6 id="offcanvasRightLabel" class="fw-semibold">Add new Filter</h6>
                    <div class="d-flex align-items-center">
                        <button type="button" class=" text-reset clear__btn type__two__btn" style="font-size: 1.4rem;"
                            data-bs-dismiss="offcanvas" aria-label="Close"><i class='bx bx-x'></i></button>
                    </div>
                </div>

                <small class="fw-normal d-flex" style="width: 80%;">
                    Step
                    of
                    Lorem,
                    ipsum
                    dolor sit amet
                    consectetur adipisicing elit.
                </small>
            </div>
        </div>

        <div class="offcanvas-body  mt-2 mb-4" style="max-height: 90vh; padding-left: .6rem;">
            <div class="" style="min-height: 70vh;">
                <div class="d-flex flex-column row-gap-0">

                    <div class="d-flex flex-column mb-3">
                        <small class="fw-semibold d-flex align-items-center gap-1"
                            style="color: var(--menu-primary); font-size: .8rem;">
                            <i class='bx bx-plug' style="font-size: 1rem;"></i>General
                        </small>
                        <small class="description__text fw-normal"
                            style="font-size: .78rem; opacity: .7; font-size: .76rem; padding-left: 1.2rem;">
                            Lorem ipsum dolor sit, amet consectetur adipisicing elit.
                        </small>
                    </div>

                    <div class="d-flex flex-column row-gap-2" style="width: 88%;">
                        <div
                            class=" mt-2 d-flex flex-column flex-lg-row align-items-lg-center justify-content-lg-between ">
                            <div class="filed__card">
                                <small class="field__label">Filter Name</small>
                                <input id="provider" type="text" class="param__field"
                                    style="font-size: .8rem; width: 250px;" placeholder="Enter filter name">
                            </div>
                            <div class="filed__card mt-3 mt-lg-0">
                                <small class="field__label">Priority</small>
                                <input id="script_priority" type="number" class="param__field fw-semibold text-center"
                                    style="font-size: .8rem; width: 80px; " placeholder="">
                            </div>
                        </div>

                        <div class="filed__card">
                            <small class="field__label">Test</small>
                            <input id="provider" type="text" class="param__field w-100" style="font-size: .8rem;"
                                placeholder="ALLOF (AND)">
                        </div>
                    </div>

                    <!-- Tab Menu Header-->
                    <div class="menu__card mt-3">
                        <ul class="nav nav-pills mb-3 column-gap-4" id="imap-tab" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="active clear__btn" id="pills-condition-tab" data-bs-toggle="pill"
                                    data-bs-target="#pills-condition" type="button" role="tab"
                                    aria-controls="pills-condition" aria-selected="true">
                                    Conditions
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="clear__btn" id="pills-action-tab" data-bs-toggle="pill"
                                    data-bs-target="#pills-action" type="button" role="tab" aria-controls="pills-action"
                                    aria-selected="false">
                                    Actions
                                </button>
                            </li>
                        </ul>
                    </div>

                    <!-- Tab Children-->
                    <div class="tab-content scrolbale pt-4" id="pills-tabContent" style="width: 88%;">
                        <!-- 1 -->
                        <div class="tab-pane fade show active " id="pills-condition" role="tabpanel"
                            aria-labelledby="pills-condition-tab">

                            <div class="filed__card mb-3">
                                <small class="field__label">Select a Category</small>
                                <select class="form-select no-focus" id="categorySelect">
                                    <optgroup label="Message">
                                        <option value="subject">Subject</option>
                                        <option value="body">Body</option>
                                        <option value="size">Size (KB)</option>
                                    </optgroup>

                                    <optgroup label="Header">
                                        <option value="to">To</option>
                                        <option value="from">From</option>
                                        <option value="cc">CC</option>
                                        <option value="to_or_cc">To or CC</option>
                                        <option value="bcc">BCC</option>
                                        <option value="custom">Custom</option>
                                    </optgroup>
                                </select>
                            </div>

                            <div id="customer-input" class="filed__card mb-3">
                                <small class="field__label">Customer</small>
                                <input id="address" type="text" class="param__field w-100" style="font-size: .8rem;"
                                    placeholder="ALLOF (AND)">
                            </div>

                            <div class="d-flex flex-column row-gap-2">
                                <small class="field__label">Select a
                                    Condition</small>
                                <select class="form-select" id="conditionSelect" disabled>
                                    <option value="">Select a category first</option>
                                </select>
                            </div>

                            <div class="filed__card mt-3">
                                <small class="field__label">Address</small>
                                <input id="address" type="text" class="param__field w-100" style="font-size: .8rem;"
                                    placeholder="ALLOF (AND)">
                            </div>
                        </div>

                        <!-- 2 -->
                        <div class="tab-pane fade" id="pills-action" role="tabpanel"
                            aria-labelledby="pills-mail-server-tab">
                            <div class="d-flex flex-column row-gap-2 mb-3">
                                <small class="field__label">Select an Action</small>
                                <select class="form-select" id="actionSelect">

                                    <option value="deliver">Deliver (Keep)</option>
                                    <option value="copy_email">Copy email to mailbox</option>
                                    <option value="move_email">Move email to mailbox</option>
                                    <option value="flag">Flag</option>
                                    <option value="add_flag">Add Flag</option>
                                    <option value="remove_flag">Remove Flag</option>
                                    <option value="redirect">Redirect</option>
                                    <option value="forward">Forward</option>
                                    <option value="reject">Reject</option>
                                    <option value="discard">Discard</option>
                                    <option value="reply_message">Reply Message</option>
                                </select>
                            </div>

                            <div id="dynamicFields" class="" style="display: none;"></div>
                            <!-- ------------------------------- Actions ------------------------------- -->
                            <div class="my-4 w-100">
                                <div class="w-100 d-flex column-gap-2" style="margin-top: 1.15rem;">
                                    <button class="btn-reset px-4">Reset<i class='bx bx-reset'></i></button>
                                    <button class="btn-connect">Save <i class='bx bx-transfer-alt'></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Script Modal -->
    <div class="offcanvas offcanvas-end my-2 mx-2 rounded scrollable overflow-y-auto" tabindex="-1" id="script-modal"
        aria-labelledby="offcanvasRightLabel">

        <!-- Header -->
        <div class="offcanvas-header" style="min-height: 10%;">
            <div class="w-100">
                <div class="d-flex justify-content-between align-items-center">
                    <h6 id="offcanvasRightLabel" class="fw-semibold">Add Script</h6>
                    <div class="d-flex align-items-center">
                        <button type="button" class="text-reset clear__btn type__two__btn" style="font-size: 1.4rem;"
                            data-bs-dismiss="offcanvas" aria-label="Close">
                            <i class='bx bx-x'></i>
                        </button>
                    </div>
                </div>
                <span class="fw-normal w-25" style="font-size: .82rem;">
                    Step of Lorem, ipsum dolor sit amet consectetur adipisicing elit.
                </span>
            </div>
        </div>


        <div class="position-relative" style="min-height: 80%;">
            <div class="position-absolute start-0 end-0 top-0 bottom-0">
                <div class="offcanvas-body position-relative d-flex flex-column">
                    <div class="d-flex flex-column row-gap-2">
                        <div
                            class=" mt-2 d-flex flex-column flex-lg-row align-items-lg-center justify-content-lg-between ">
                            <div class="filed__card">
                                <small class="field__label">Filter Name</small>
                                <input id="provider" type="text" class="param__field"
                                    style="font-size: .8rem; width: 250px;" placeholder="Enter filter name">
                            </div>
                            <div class="filed__card mt-3 mt-lg-0">
                                <small class="field__label">Priority</small>
                                <input id="script_priority" type="number" class="param__field fw-semibold text-center"
                                    style="font-size: .8rem; width: 80px; " placeholder="">
                            </div>
                        </div>

                        <!-- <div> -->
                        <div class="d-flex flex-column mb-3" style="width: 98%;">
                            <small class="fw-semibold d-flex align-items-center gap-1 mb-1"
                                style="color: var(--menu-primary); font-size: .8rem;">
                                <i class='bx bx-plug' style="font-size: 1rem;"></i>Sieve Script
                            </small>
                            <small class="description__text fw-normal"
                                style="font-size: .78rem; opacity: .7; font-size: .76rem; padding-left: 2px;">
                                Past the Sieve script in the field below. Manualy added scripts cannot
                                be edited
                                with
                                the filters interface
                            </small>

                            <textarea name="" id="" type="text" class="param__field scrollable w-100 mt-3"
                                style="font-size: .8rem; height: 200px"></textarea>

                        </div>

                        <!--  -->
                        <div class="d-flex justify-content-end" style="width: 98%;">
                            <div class=" w-50">
                                <button class="btn-connect w-100" style="font-size: .9rem;">Save <i
                                        class='bx bx-transfer-alt'></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </div>

    <!-- JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.min.js"
        integrity="sha512-ykZ1QQr0Jy/4ZkvKuqWn4iF3lqPZyij9iRv6sGqLRdTPkY69YX6+7wvVGmsdBbiIfN/8OdsI7HABjvEok6ZopQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="/assets/js/utils.js"></script>
    <script>
        function selectOption(selected) {
            document.querySelectorAll('.option-card').forEach(el => {
                el.classList.remove('active');
                el.querySelector('.radio-circle').classList.remove('active');
            });

            selected.classList.add('active');
            selected.querySelector('.radio-circle').classList.add('active');
        }


        document.addEventListener("DOMContentLoaded", function () {
            const categorySelect = document.getElementById("categorySelect");
            const conditionSelect = document.getElementById("conditionSelect");

            // Mapping des conditions par catégorie
            const conditions = {
                subject: ["Contains", "Not Contains", "Not Matches", "Regex", "Not Regex"],
                body: ["Contains", "Not Contains", "Not Matches", "Regex", "Not Regex"],
                size: ["Over", "Not Over", "Under", "Not Under"],
                to: ["Contains", "Not Contains", "Not Matches", "Regex", "Not Regex"],
                from: ["Contains", "Not Contains", "Not Matches", "Regex", "Not Regex"],
                cc: ["Contains", "Not Contains", "Not Matches", "Regex", "Not Regex"],
                to_or_cc: ["Contains", "Not Contains", "Not Matches", "Regex", "Not Regex"],
                bcc: ["Contains", "Not Contains", "Not Matches", "Regex", "Not Regex"],
                custom: ["Contains", "Not Contains", "Not Matches", "Regex", "Not Regex"]
            };

            // Mise à jour du deuxième select en fonction du premier
            categorySelect.addEventListener("change", function () {
                const selectedValue = categorySelect.value;
                conditionSelect.innerHTML = "";

                if (selectedValue) {
                    conditions[selectedValue].forEach(condition => {
                        let option = document.createElement("option");
                        option.value = condition.toLowerCase().replace(/\s/g, "_");
                        option.textContent = condition;
                        conditionSelect.appendChild(option);
                    });
                    conditionSelect.disabled = false;
                } else {
                    conditionSelect.innerHTML = "<option value=''>Select a category first</option>";
                    conditionSelect.disabled = true;
                }
            });
        });


        $("#bloack-option-list").click(function () {
            $(".dropdown-menu-custom").toggleClass("show");
            $(".icon").toggleClass("rotate-icon");
        });

        $(document).click(function (e) {
            if (!$(e.target).closest(".dropdown-container").length) {
                $(".dropdown-menu-custom").removeClass("show");
                $(".icon").removeClass("rotate-icon");
            }
        });


        // 2
        $("#table-modal").click(function () {
            console.log(`+- Hello`)
            $(".table-dropdown-menu-custom").toggleClass("show");
            // $(".icon").toggleClass("rotate-icon");
        });

        $(document).click(function (e) {
            if (!$(e.target).closest(".table-dropdown-container").length) {
                $(".table-dropdown-menu-custom").removeClass("show");
                // $(".icon").removeClass("rotate-icon");
            }
        });



        // 
        const categorySelect = document.getElementById("categorySelect");
        const customerInput = document.getElementById("customer-input");

        // Masquer le champ "customer-input" au départ
        customerInput.style.display = "none";

        categorySelect.addEventListener("change", function () {
            if (categorySelect.value === "custom") {
                customerInput.style.display = "flex";  // Afficher l'input
            } else {
                customerInput.style.display = "none";   // Cacher l'input
            }
        });


        // Actions
        document.getElementById("actionSelect").addEventListener("change", function () {
            const selectedAction = this.value;
            const dynamicFields = document.getElementById("dynamicFields");

            // Réinitialiser le contenu et cacher le div
            dynamicFields.innerHTML = "";
            dynamicFields.style.display = "none";

            if (!selectedAction) return; // Si aucune sélection, on quitte

            // On affiche le div
            // dynamicFields.classList.add("d-flex", "flex-column", "column-gap-2", "my-2");
            dynamicFields.classList.add("d-flex", "flex-column", "mt-2");
            // dynamicFields.toggleClass("dynamic__div");

            // Fonction pour créer et ajouter un label
            const createLabel = (text) => {
                let label = document.createElement("small");
                label.className = "field__label mb-2";
                label.textContent = text;
                return label;
            };

            // Effacer les champs dynamiques avant d'ajouter de nouveaux
            dynamicFields.innerHTML = "";

            if (selectedAction === "copy_email" || selectedAction === "move_email") {
                // Label
                dynamicFields.appendChild(createLabel("Select a Mailbox"));

                // Select pour les boîtes mail
                const mailboxes = ["Inbox", "Spam", "Important", "Archives", "Work", "Personal"];
                let select = document.createElement("select");
                select.className = "form-select";
                mailboxes.forEach(mailbox => {
                    let option = document.createElement("option");
                    option.value = mailbox.toLowerCase();
                    option.textContent = mailbox;
                    select.appendChild(option);
                });
                dynamicFields.appendChild(select);

            } else if (["flag", "add_flag", "remove_flag"].includes(selectedAction)) {
                // Label
                dynamicFields.appendChild(createLabel("Select a Flag"));

                // Select pour les flags
                const flags = ["Seen", "Answered", "Flagged", "Deleted", "Draft", "Recent"];
                let select = document.createElement("select");
                select.className = "form-select";
                flags.forEach(flag => {
                    let option = document.createElement("option");
                    option.value = flag.toLowerCase();
                    option.textContent = flag;
                    select.appendChild(option);
                });
                dynamicFields.appendChild(select);

            } else if (selectedAction === "redirect" || selectedAction === "forward") {
                // Label
                dynamicFields.appendChild(createLabel("Email"));

                // Input pour l'email

                let input = document.createElement("input");
                input.id = "email";
                input.type = "email";
                input.className = "param__field px-2";
                input.style.fontSize = ".8rem";
                input.style.width = "100%";
                input.placeholder = "Enter email";

                // input.type = "email";
                // input.className = "form-control";
                // input.placeholder = "Enter email address";
                dynamicFields.appendChild(input);

            } else if (selectedAction === "reject") {
                // Label
                dynamicFields.appendChild(createLabel("Reason for Rejection"));

                // Input pour le rejet
                let input = document.createElement("input");
                input.type = "text";
                input.className = "form-control";
                input.placeholder = "Reason for rejection";
                dynamicFields.appendChild(input);

            } else if (selectedAction === "reply_message") {
                // Label pour le sujet
                dynamicFields.appendChild(createLabel("Enter Subject"));

                let subjectInput = document.createElement("input");
                subjectInput.id = "provider";
                subjectInput.type = "text";
                subjectInput.className = "param__field w-100 px-2 mb-3";
                subjectInput.style.fontSize = ".8rem";
                subjectInput.style.width = "280px";
                subjectInput.placeholder = "Enter subject";
                // Label pour le message


                // Textarea pour le message
                let messageTextarea = document.createElement("textarea");
                messageTextarea.className = "param__field scrollable w-100 mb-3"; // Ajout des classes
                messageTextarea.style.fontSize = ".8rem";
                messageTextarea.style.height = "200px";
                messageTextarea.placeholder = "Enter your reply message";

                dynamicFields.appendChild(subjectInput);

                dynamicFields.appendChild(createLabel("Enter Your Reply Message"));
                dynamicFields.appendChild(messageTextarea);
            }
        });

    </script>
</body>

</html>